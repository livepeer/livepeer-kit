---
title: 'useCreateAsset'
description: 'React Hook for creating a new asset.'
---

# useCreateAsset

Hook for creating a new [Asset](https://github.com/livepeer/livepeer.js/blob/main/packages/core/src/types/provider.ts).

```tsx
import { useCreateAsset } from '@livepeer/react';
```

## Usage

import { Callout } from 'nextra-theme-docs';

<Callout>
  The asset ID should only be passed to users who are allowed to modify the
  asset. **Ensure viewers are only provided with the `playbackId`,** which is a
  limited identifier that provides only the ability to stream media using the
  [`Player`](/docs/Player).
</Callout>

You can upload multiple assets at once by passing an array of files to the `mutate` function.

The following example shows how an asset can be created with the `mutate` function, but could also use the asynchronous `mutateAsync`
function.

```tsx {7, 29-36}
import { useAsset, useCreateAsset } from '@livepeer/react';
import { useState } from 'react';

function App() {
  const [videos, setVideos] = useState<File[]>([]);
  const {
    mutate: createAssets,
    data: assets,
    uploadProgress,
    status,
    error,
  } = useCreateAsset();

  return (
    <div>
      <input
        type="file"
        multiple
        accept="video/*"
        onChange={(e) => {
          if (e.target.files) {
            setVideos(e.target.files);
          }
        }}
      />
      <button
        disabled={!videos || status === 'loading'}
        onClick={() => {
          const files = videos.map((video) => ({
            file: video,
            name: video.name,
          }));

          createAssets({
            sources: files,
          });
        }}
      >
        Create Asset
      </button>
      {assets?.map((asset) => (
        <div key={asset.id}>
          <div>
            <div>Asset Name: {asset?.name}</div>
            <div>Playback URL: {asset?.playbackUrl}</div>
            <div>IPFS CID: {asset?.storage?.ipfs?.cid ?? 'None'}</div>
          </div>
        </div>
      ))}

      {error && <div>{error.message}</div>}
    </div>
  );
}
```

## Return Value

The return value is partially based on [React Query](https://tanstack.com/query/v4/docs/reference/useMutation), with some return types
aggregated for simplicity. The `uploadProgress` is a number from 0-1 which represents the current upload progress of the asset from
[tus](https://github.com/tus/tus-js-client) - the value is undefined unless an upload is in progress.

```tsx
  {
    data?: Asset[],
    uploadProgress?: CreateAssetProgress,
    error?: Error,
    isError: boolean,
    isIdle: boolean,
    isLoading: boolean,
    isSuccess: boolean,
    status: 'idle' | 'loading' | 'success' | 'error',
    mutate: (config: CreateAssetArgs, options?: MutateOptions) => void,
    mutateAsync: (config: CreateAssetArgs, options?: MutateOptions) => Promise<Asset>,
    variables?: CreateAssetArgs
  }
```

The variables for the mutate function(s) are defined as:

```tsx
type CreateAssetArgs = {
  /** Source(s) to upload */
  sources: CreateAssetSource[];
  /** Callback to receive progress, it is a object that include average and array of files */
  onUploadProgress?: (progress: CreateAssetProgress) => void;
};

type CreateAssetSource = CreateAssetSourceFile | CreateAssetSourceUrl;

type CreateAssetSourceBase = {
  /** Name for the new asset */
  name: string;
};

type CreateAssetSourceUrl = CreateAssetSourceBase & {
  /** External URL to be imported */
  url: string;
};

type CreateAssetSourceFile = CreateAssetSourceBase & {
  /** Content to be uploaded or streamed */
  file: File | ReadStream;
};

type CreateAssetProgress = {
  /** Average of the progress values */
  average: number;
  /** Progress values */
  sources: CreateAssetFileProgress[];
};

type CreateAssetFileProgress = {
  /** Name of the asset */
  name: string;
  /** Progress from 0 to 1 */
  progress: number;
};
```

If a file is provided, the `useCreateAsset` hook uses [tus](https://github.com/tus/tus-js-client) for resumable uploads and checks for existing uploads by default, before starting a
new upload.

If a URL is provided, the hook will make a request to the background to start an import. This can also
be an IPFS URL (`ipfs://<CID>`) or Arweave URL (`ar://<HASH>`). **Either a URL or file must be provided.**

## Configuration

### UseMutationOptions

The `useCreateAsset` hook also supports any [React Query](https://tanstack.com/query/v4/docs/reference/useMutation) `useMutation` options, such as
`cacheTime` or `retry`. These override any configs passed by default by the internal hook.

```tsx {5}
import { useCreateAsset } from '@livepeer/react';

function App() {
  const { mutate: createAsset } = useCreateAsset({
    retry: 5,
  });
}
```
